(function(a,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(a=typeof globalThis<"u"?globalThis:a||self,t(a.Modal={},a.Vue))})(this,function(a,t){"use strict";const u={props:{componentPrefix:String,size:String,sizePrefix:String},computed:{sizeableClassPrefix(){return this.sizePrefix||this.componentPrefix},hasSizeablePrefix(){return this.size===void 0?!1:!!this.size.match(new RegExp(`^${this.sizeableClassPrefix}`))},sizeableClass(){return this.size?!this.sizeableClassPrefix||this.hasSizeablePrefix?this.size:`${this.sizeableClassPrefix}-${this.size}`:""}}},b={props:{componentPrefix:String,variant:String,variantPrefix:String},computed:{variantClassPrefix(){return this.variantPrefix||this.componentPrefix},hasVariantPrefix(){return this.variant===void 0?!1:!!this.variant.match(new RegExp(`^${this.variantClassPrefix}`))},variantClass(){return this.variant?!this.variantClassPrefix||this.hasVariantPrefix?this.variant:`${this.variantClassPrefix}-${this.variant}`:""}}},g=t.defineComponent({mixins:[u,b],props:{active:Boolean,block:Boolean,componentPrefix:{type:String,default:"btn"},disabled:Boolean,label:String,outline:Boolean,tag:String,variant:{type:String,default:"primary"}},computed:{classes(){return["btn",this.variantClass,this.sizeableClass,this.active&&"active",this.block&&"btn-block",this.disabled&&"disabled"]},component(){return this.tag?this.tag:this.$attrs.href?"a":"button"},variantClassPrefix(){return(this.variantPrefix||this.componentPrefix)+(this.outline?"-outline":"")}}}),y=(e,o)=>{const s=e.__vccOpts||e;for(const[n,r]of o)s[n]=r;return s};function C(e,o,s,n,r,i){return t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.component),t.mergeProps(e.$attrs,{disabled:e.disabled,class:e.classes,role:"button"}),{default:t.withCtx(()=>[t.renderSlot(e.$slots,"default",{},()=>[t.createTextVNode(t.toDisplayString(e.label),1)])]),_:3},16,["disabled","class"])}const k=y(g,[["render",C]]);var d={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},B=function(e,o,s,n){if(!d.hasOwnProperty(s))throw new Error("Cannot convert to "+s);if(!d[s].hasOwnProperty(o))throw new Error("Cannot convert from "+o+" to "+s);var r=d[s][o]*e;return n!==!1?(n=Math.pow(10,parseInt(n)||5),Math.round(r*n)/n):r};const P={props:{buttons:{type:[Boolean,Array],default:void 0,validate(e){return Array.isArray(e)||!e}},cancel:{type:Function,default(e,o,s,n){n(!1)}},cancelButton:Object,confirm:{type:Function,default(e,o,s,n){n(!0)}},confirmButton:Object,resolve:{type:Function,default(e,o,s,n){n&&s.close()}},show:{type:Boolean,defaut:!1}},methods:{focus(){this.$el.focus()},close(e){return new Promise(o=>{e=e||new Event("close",{cancelable:!0});const s=()=>{this.isClosing=!0,this.isShowing=!1,this.transition(()=>{this.isClosing=!1,this.isDisplaying=!1,this.$emit("closed",e),o(this)})};this.$emit("close",e,this.$refs.close,this,s),e.defaultPrevented||s()})},buttonAttributes(e){return Object.assign({class:null,disabled:!1,size:"md",variant:"primary"},Object.fromEntries(Object.entries(e).filter(([o])=>!o.match(/^on[A-Z]/))))},open(){return new Promise(e=>{const o=new Event("close",{cancelable:!0}),s=()=>{this.isDisplaying=!0,setTimeout(()=>{this.isShowing=!0,this.transition(()=>{this.$emit("opened"),e(this)})})};this.$emit("open",o,s),o.defaultPrevented||s()})},transition(e){const s=getComputedStyle(this.$refs.dialog).transitionDuration.split(",").map(n=>{const r=n.trim().match(/^([\d.]+)(\w+)$/);if(!r)return 0;const i=parseFloat(r[1]),l=r[2];return B(i,l,"ms")}).sort((n,r)=>n-r).shift();return setTimeout(e,s)},toggle(){this.isShowing?this.close():this.open()}},computed:{triggerableClasses(){return{show:this.isShowing}},computedCancelButton(){const e={variant:"secondary",label:"Cancel",name:"confirm",onClick:o=>{this.cancel(o,e,this,(...s)=>{this.resolve(o,e,this,...s)})}};return this.cancelButton||e},computedConfirmButton(){const e={variant:"primary",label:"Confirm",name:"confirm",onClick:o=>{this.confirm(o,e,this,(...s)=>{this.resolve(o,e,this,...s)})}};return this.confirmButton||e},currentButtons(){if(Array.isArray(this.buttons))return t.ref(this.buttons).value.map(e=>{const o=e.onClick||(()=>{});return Object.assign(e,{onClick:s=>o(s,e,this,(...n)=>this.resolve(s,e,this,...n))})});if(this.type==="alert")return[this.computedConfirmButton];if(this.type==="confirm")return[this.computedConfirmButton,this.computedCancelButton]}},watch:{isShowing(e){e&&this.focus()},show(e){e&&this.open()}},mounted(){this.show&&this.open()},data(){return{isClosing:!1,isShowing:!1,isDisplaying:!1}}},w=t.defineComponent({name:"Modal",components:{Btn:k},mixins:[P],beforeRouteLeave(){this.close()},props:{backdrop:{type:Boolean,default:!0},center:Boolean,closeable:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},indicator:{type:Object,default:void 0},title:{type:String,default:void 0},type:{type:[Boolean,String],default:!1,validate(e){return["alert","confirm"].indexOf(e)!==-1}}},watch:{isShowing(e){var o;(o=document.querySelector("body"))==null||o.classList[e?"add":"remove"]("modal-open")}}}),_="",S=(e,o)=>{const s=e.__vccOpts||e;for(const[n,r]of o)s[n]=r;return s},$={class:"modal-content"},z={class:"modal-header"},x={key:0,class:"modal-title"},E=["disabled"],M=[t.createElementVNode("span",{"aria-hidden":"true"},"\xD7",-1)],O={class:"modal-body"},j={key:0,ref:"footer",class:"modal-footer"},V={class:"modal-footer-buttons"};function N(e,o,s,n,r,i){const l=t.resolveComponent("btn");return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["modal fade",{...e.triggerableClasses}]),style:t.normalizeStyle({display:e.isDisplaying?"block":"none"}),tabindex:"-1",onKeydown:o[2]||(o[2]=t.withKeys((...c)=>e.close&&e.close(...c),["esc"]))},[t.renderSlot(e.$slots,"backdrop",{},()=>[e.backdrop&&e.isDisplaying?(t.openBlock(),t.createElementBlock("div",{key:0,ref:"backdrop",class:t.normalizeClass(["modal-backdrop fade",{show:e.isShowing}]),onClick:o[0]||(o[0]=c=>e.closeable&&e.close)},null,2)):t.createCommentVNode("",!0)]),t.createElementVNode("div",{ref:"dialog",class:t.normalizeClass(["modal-dialog",{"modal-dialog-centered":e.center}])},[t.createElementVNode("div",$,[t.renderSlot(e.$slots,"header",{},()=>[t.createElementVNode("div",z,[t.renderSlot(e.$slots,"title",{},()=>[e.title?(t.openBlock(),t.createElementBlock("h3",x,t.toDisplayString(e.title),1)):t.createCommentVNode("",!0)]),t.renderSlot(e.$slots,"close-button",{},()=>[e.closeable?(t.openBlock(),t.createElementBlock("button",{key:0,ref:"close",type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",disabled:e.isClosing,onClick:o[1]||(o[1]=(...c)=>e.close&&e.close(...c))},M,8,E)):t.createCommentVNode("",!0)])])]),t.renderSlot(e.$slots,"body",{},()=>[(t.openBlock(),t.createBlock(t.Suspense,null,{fallback:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(e.indicator)))]),default:t.withCtx(()=>[t.createElementVNode("div",O,[t.renderSlot(e.$slots,"default",{ref:"content"})])]),_:3}))]),e.footer?t.renderSlot(e.$slots,"footer",{key:0,close:e.close},()=>[e.currentButtons.length?(t.openBlock(),t.createElementBlock("div",j,[t.createElementVNode("div",V,[e.currentButtons.length?(t.openBlock(!0),t.createElementBlock(t.Fragment,{key:0},t.renderList(e.currentButtons,(c,m)=>(t.openBlock(),t.createBlock(l,t.mergeProps({key:`btn-${m}`},c),null,16))),128)):t.createCommentVNode("",!0)])],512)):t.createCommentVNode("",!0)]):t.createCommentVNode("",!0)])],2)],38)}const p=S(w,[["render",N]]);class f{constructor(o,s){this.app=o,this.props=s}mount(o){o.appContext=this.app._context;const s=document.createElement("div");t.render(t.h(o),s),document.body.append(s)}register(o,s){Object.defineProperty(this,o,{value:(n,r,i)=>{const l=new Promise((c,m)=>{this.mount(s({title:n,props:Object.assign({},this.props,i),resolve:h=>(c(h),l),reject:h=>(m(h),l),promise:()=>l,content:typeof r=="string"?t.h("div",r):r(this.app,i)}))});return l}})}}const D=(e,o={})=>{const s=new f(e,o);s.register("alert",({title:n,content:r,props:i})=>t.h(p,Object.assign({title:n,show:!0,type:"alert"},i),{default:()=>t.h(r,Object.assign({ref:"content"}))})),s.register("confirm",({title:n,content:r,props:i})=>t.h(p,Object.assign({title:n,show:!0,type:"confirm"},i),{default:()=>t.h(r,Object.assign({ref:"content"}))})),e.provide("modal",s),e.config.globalProperties.$modal=s};a.Modal=p,a.ModalFactory=f,a.ModalPlugin=D,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
