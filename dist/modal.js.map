{"version":3,"file":"modal.js","sources":["../src/Triggerable.ts","../src/Modal.vue","../src/ModalFactory.ts","../src/ModalPlugin.ts"],"sourcesContent":["import converter, { CSSUnits } from 'css-unit-converter';\nimport { ref } from 'vue';\n\nexport type ResolveCallback = (status: boolean) => void;\n\nexport type ClickCallback = (e: Event, button: Button, modal: any, resolve: ResolveCallback) => void;\n\nexport interface Button {\n    class: null,\n    disabled: false,\n    size: 'md',\n    variant: 'primary',\n    onClick?: ClickCallback\n}\n\nexport default {\n\n    props: {\n\n        /**\n         * Custom buttons for the model.\n         *\n         * @type {Array}\n         */\n        buttons: {\n            type: [Boolean, Array],\n            default: undefined,\n            validate(value: any) {\n                return Array.isArray(value) || !value;\n            }\n        },\n\n        /**\n         * The cancel button callback function.\n         * \n         * @type {Function}\n         */\n        cancel: {\n            type: Function,\n            default(e: Event, button: Button, modal: any, resolve: Function) {\n                resolve(false);\n            }\n        },\n\n        /**\n         * The cancel button contextual object.\n         *\n         * @type {Object}\n         */\n        cancelButton: Object,\n\n        /**\n         * The confirm button callback function.\n         * \n         * @type {Function}\n         */\n        confirm: {\n            type: Function,\n            default(e: Event, button: Button, modal: any, resolve: Function) {\n                resolve(true);\n            }\n        },\n\n        /**\n         * The confirm button contextual object.\n         *\n         * @type {Object}\n         */\n        confirmButton: Object,\n\n        /**\n         * The default resolver.\n         * \n         * @property {Function}\n         */\n        resolve: {\n            type: Function,\n            default(e: Event, button: Button, modal: any, status: boolean) {\n                if(status) {\n                    modal.close();\n                }\n            }\n        },\n\n        /**\n         * Is the triggerable element showing.\n         *\n         * @property {Boolean}\n         */\n        show: {\n            type: Boolean,\n            defaut: false\n        }\n    },\n\n    methods: {\n    \n        focus() {\n            this.$el.focus();\n        },\n\n        close(e: Event) {\n            return new Promise(resolve => {\n                e = e || new Event('close', {\n                    cancelable: true\n                });\n\n                const handler = () => {\n                    this.isClosing = true;\n                    this.isShowing = false;\n                    \n                    this.transition(() => {\n                        this.isClosing = false;\n                        this.isDisplaying = false;\n                        this.$emit('closed', e);\n    \n                        resolve(this);\n                    });\n                };\n                \n                this.$emit('close', e, this.$refs.close, this, handler);\n\n                if(!e.defaultPrevented) {\n                    handler();\n                }\n            });\n        },\n\n        buttonAttributes(button: Button) {\n            return Object.assign({\n                class: null,\n                disabled: false,\n                size: 'md',\n                variant: 'primary',\n            }, Object.fromEntries(\n                Object.entries(button).filter(([key]) => {\n                    return !key.match(/^on[A-Z]/);\n                })\n            ));\n        },\n\n        open() {\n            return new Promise(resolve => {\n                const e = new Event('close', {\n                    cancelable: true\n                });\n\n                const handler = () => {\n                    this.isDisplaying = true;\n\n                    setTimeout(() => {\n                        this.isShowing = true;\n                        this.transition(() => {\n                            this.$emit('opened');\n\n                            resolve(this);\n                        });\n                    });\n                };\n\n                this.$emit('open', e, handler);\n\n                if(!e.defaultPrevented) {\n                    handler();\n                }\n            });\n        },\n\n        transition(fn: Function) {\n            const styles = getComputedStyle(this.$refs.dialog);\n                \n            const value = styles.transitionDuration.split(',')\n                .map(value => {\n                    const matches = value.trim().match(/^([\\d.]+)(\\w+)$/);\n\n                    if(!matches) {\n                        return 0;\n                    }\n\n                    const number: number = parseFloat(matches[1]);\n                    const unit: CSSUnits = <CSSUnits> matches[2];\n                    \n                    return converter(number, unit, 'ms');\n                })\n                .sort((a, b) => {\n                    return a - b;\n                })\n                .shift();\n            \n            return setTimeout(fn, value);\n        },\n\n        toggle() {\n            if(!this.isShowing) {\n                this.open();\n            }\n            else {\n                this.close();\n            }\n        },\n\n    },\n\n    computed: {\n\n        triggerableClasses() {\n            return {\n                show: this.isShowing\n            };\n        },\n\n        computedCancelButton() {\n            const button = {\n                variant: 'secondary',\n                label: 'Cancel',\n                name: 'confirm',\n                onClick: (e: Event) => {\n                    this.cancel(e, button, this, (...args: any[]) => {\n                        this.resolve(e, button, this, ...args);\n                    });\n                }\n            };\n\n            return this.cancelButton || button;\n        },\n\n        computedConfirmButton() {\n            const button = {\n                variant: 'primary',\n                label: 'Confirm',\n                name: 'confirm',\n                onClick: (e: Event) => {\n                    this.confirm(e, button, this, (...args: any[]) => {\n                        this.resolve(e, button, this, ...args);\n                    });\n                }\n            };\n\n            return this.confirmButton || button;\n        },\n\n        currentButtons() {\n            if(Array.isArray(this.buttons)) {\n                return ref(this.buttons).value.map((button: Button) => {\n                    const onClick = button.onClick || (() => undefined);\n\n                    return Object.assign(button, {\n                        onClick: (e: Event) => onClick(e, button, this, (...args: any) => {\n                            return this.resolve(e, button, this, ...args);\n                        })\n                    });\n                });\n            }\n            else if(this.type === 'alert') {\n                return [this.computedConfirmButton];\n            }\n            else if(this.type === 'confirm') {\n                return [\n                    this.computedConfirmButton,\n                    this.computedCancelButton\n                ];\n            }\n        }\n    },\n\n    watch: {\n        isShowing(value: boolean) {\n            if(value) {\n                this.focus();\n            }\n        },\n\n        show(value: boolean) {\n            if(value) {\n                this.open();\n            }\n        }\n    },\n\n    mounted() {\n        if(this.show) {\n            this.open();\n        }\n    },\n\n    data() {\n        return {\n            isClosing: false,\n            isShowing: false,\n            isDisplaying: false,\n        };\n    }\n\n};\n","<script lang=\"ts\">\nimport { Btn } from '@vue-interface/btn';\nimport { defineComponent } from 'vue';\nimport Triggerable from './Triggerable.js';\n\nexport default defineComponent({\n\n    name: 'Modal',\n\n    components: {\n        Btn\n    },\n\n    mixins: [\n        Triggerable\n    ],\n\n    beforeRouteLeave() {\n        this.close();\n    },\n\n    props: {\n        /**\n         * Show the modal with a backdrop.\n         *\n         * @type {Boolean}\n         */\n        backdrop: {\n            type: Boolean,\n            default: true\n        },\n\n        /**\n         * Is the modal centered in the screen.\n         *\n         * @type {Boolean}\n         */\n        center: Boolean,\n\n        /**\n         * Is the modal content fixed position\n         *\n         * @type {Boolean}\n         */\n        closeable: {\n            type: Boolean,\n            default: true\n        },\n\n        /**\n         * Should show the modal footer.\n         *\n         * @type {Boolean}\n         */\n        footer: {\n            type: Boolean,\n            default: true\n        },\n\n        /**\n         * Should show the modal footer.\n         *\n         * @type {Boolean}\n         */\n        indicator: {\n            type: Object,\n            default: undefined\n        },\n\n        /**\n         * The modal title.\n         *\n         * @type {String}\n         */\n        title: {\n            type: String,\n            default: undefined\n        },\n\n        /**\n         * Is the modal type.\n         *\n         * @type {Boolean}\n         */\n        type: {\n            type: [Boolean, String],\n            default: false,\n            validate(value: any) {\n                return ['alert', 'confirm'].indexOf(value) !== -1;\n            }\n        }\n    },\n\n    watch: {\n        isShowing(value) {            \n            document.querySelector('body')?.classList[value ? 'add' : 'remove']('modal-open');\n        }\n    }\n\n});\n</script>\n\n<template>\n    <div\n        class=\"modal fade\"\n        :class=\"{...triggerableClasses}\"\n        :style=\"{display: isDisplaying ? 'block' : 'none'}\"\n        tabindex=\"-1\"\n        @keydown.esc=\"close\">\n        <slot name=\"backdrop\">\n            <div\n                v-if=\"backdrop && isDisplaying\" \n                ref=\"backdrop\"\n                class=\"modal-backdrop fade\"\n                :class=\"{'show': isShowing}\"\n                @click=\"closeable && close\" />\n        </slot>\n        \n        <div\n            ref=\"dialog\"\n            class=\"modal-dialog\"\n            :class=\"{'modal-dialog-centered': center}\">\n            <div class=\"modal-content\">\n                <slot name=\"header\">\n                    <div class=\"modal-header\">\n                        <slot name=\"title\">\n                            <h3\n                                v-if=\"title\"\n                                class=\"modal-title\">\n                                {{ title }}\n                            </h3>\n                        </slot>\n\n                        <slot name=\"close-button\">\n                            <button\n                                v-if=\"closeable\"\n                                ref=\"close\"\n                                type=\"button\"\n                                class=\"close\"\n                                data-dismiss=\"modal\"\n                                aria-label=\"Close\"\n                                :disabled=\"isClosing\"\n                                @click=\"close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </slot>\n                    </div>\n                </slot>\n\n                <slot name=\"body\">\n                    <Suspense>\n                        <div class=\"modal-body\">\n                            <slot ref=\"content\" />\n                        </div>\n                        <template #fallback>\n                            <component :is=\"indicator\" />\n                        </template>\n                    </Suspense>\n                </slot>\n                \n                <slot\n                    v-if=\"footer\"\n                    name=\"footer\"\n                    :close=\"close\">\n                    <div\n                        v-if=\"currentButtons.length\"\n                        ref=\"footer\"\n                        class=\"modal-footer\">\n                        <div class=\"modal-footer-buttons\">\n                            <template v-if=\"currentButtons.length\">\n                                <btn\n                                    v-for=\"(button, i) in currentButtons\"\n                                    :key=\"`btn-${i}`\"\n                                    v-bind=\"button\" />\n                            </template>\n                        </div>\n                    </div>\n                </slot>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style>\n.modal-footer-buttons {\n    display: flex;\n    align-items: center;\n    flex-direction: row-reverse;\n    grid-gap: .5rem;\n    align-items: center;\n}\n</style>","import { App, h, render, VNode } from 'vue';\n\ninterface ModalParams {\n    title: string,\n    content: VNode,\n    resolve: Function,\n    reject: Function,\n    promise: () => Promise<any>,\n    props: Record<string,any>\n}\n\nexport default class ModalFactory {\n    constructor(\n        protected readonly app: App,\n        protected readonly props: Record<string, any>\n    ) {\n        //\n    }\n\n    mount(vnode: VNode) {\n        vnode.appContext = this.app._context;\n\n        const el = document.createElement('div');\n\n        render(h(vnode), el);\n\n        document.body.append(el);\n    }\n    \n    register(type: string, callback: (params: ModalParams) => VNode) {\n        Object.defineProperty(this, type, {\n            value: (title: string, content: string|((app: App, props: Record<string,any>) => VNode), props: Record<string,any>) => {\n                const promise = new Promise((resolve, reject) => {\n                    this.mount(callback({\n                        title,\n                        props: Object.assign({}, this.props, props),\n                        resolve: (value: any) => {\n                            resolve(value);\n\n                            return promise;\n                        },\n                        reject: (value: any) => {\n                            reject(value);\n\n                            return promise;\n                        },\n                        promise: () => promise,\n                        content: typeof content === 'string'\n                            ? h('div', content)\n                            : content(this.app, props)\n                    }));\n                });\n    \n                return promise;\n            }\n        });\n    }\n\n}","import { h } from 'vue';\nimport Modal from './Modal.vue';\nimport ModalFactory from './ModalFactory';\n\nexport default (app: any, props = {}) => {\n    const factory = new ModalFactory(app, props);\n\n    /**\n     * Dispatch an alert modal.\n     * \n     * @property {String} title\n     * @property {Function|String} content\n     * @property {Object} props\n     */\n    factory.register('alert', ({ title, content, props }) => {\n        return h(Modal, Object.assign({\n            title,\n            show: true,\n            type: 'alert'\n        }, props), {\n            default: () => h(content, Object.assign({\n                ref: 'content'\n            }))\n        });\n    });\n\n    /**\n     * Dispatch a confirmation modal.\n     * \n     * @property {String} title\n     * @property {Function|String} content\n     * @property {Object} props\n     */\n    factory.register('confirm', ({ title, content, props }) => {\n        return h(Modal, Object.assign({\n            title,\n            show: true,\n            type: 'confirm'\n        }, props), {\n            default: () => h(content, Object.assign({\n                ref: 'content',\n            }))\n        });\n    });\n\n    app.provide('modal', factory);\n    app.config.globalProperties.$modal = factory;\n};"],"names":["Triggerable","value","button","modal","resolve","status","handler","key","e","fn","matches","number","unit","converter","a","b","args","ref","onClick","_sfc_main","defineComponent","Btn","_a","_hoisted_3","_hoisted_5","_createElementVNode","_hoisted_8","_resolveComponent","_openBlock","_createElementBlock","_normalizeClass","_ctx","_cache","_withKeys","_createCommentVNode","_hoisted_1","_renderSlot","_hoisted_2","_toDisplayString","_createBlock","_Suspense","_withCtx","_resolveDynamicComponent","_hoisted_7","_hoisted_9","_Fragment","_renderList","i","_component_btn","_mergeProps","ModalFactory","app","props","vnode","el","render","h","type","callback","title","content","promise","reject","ModalPlugin","factory","Modal"],"mappings":"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"}