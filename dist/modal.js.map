{"version":3,"file":"modal.js","sources":["../node_modules/@vue-interface/btn/dist/btn.es.js","../node_modules/css-unit-converter/index.js","../src/Triggerable.ts","../src/Modal.vue","../src/ModalFactory.ts","../src/ModalPlugin.ts"],"sourcesContent":["import { defineComponent as a, openBlock as n, createBlock as o, resolveDynamicComponent as l, mergeProps as h, withCtx as f, renderSlot as c, createTextVNode as p, toDisplayString as d } from \"vue\";\nconst u = {\n  props: {\n    componentPrefix: String,\n    size: String,\n    sizePrefix: String\n  },\n  computed: {\n    sizeableClassPrefix() {\n      return this.sizePrefix || this.componentPrefix;\n    },\n    hasSizeablePrefix() {\n      return this.size === void 0 ? !1 : !!this.size.match(new RegExp(`^${this.sizeableClassPrefix}`));\n    },\n    sizeableClass() {\n      return this.size ? !this.sizeableClassPrefix || this.hasSizeablePrefix ? this.size : `${this.sizeableClassPrefix}-${this.size}` : \"\";\n    }\n  }\n}, x = {\n  props: {\n    componentPrefix: String,\n    variant: String,\n    variantPrefix: String\n  },\n  computed: {\n    variantClassPrefix() {\n      return this.variantPrefix || this.componentPrefix;\n    },\n    hasVariantPrefix() {\n      return this.variant === void 0 ? !1 : !!this.variant.match(new RegExp(`^${this.variantClassPrefix}`));\n    },\n    variantClass() {\n      return this.variant ? !this.variantClassPrefix || this.hasVariantPrefix ? this.variant : `${this.variantClassPrefix}-${this.variant}` : \"\";\n    }\n  }\n}, v = a({\n  mixins: [\n    u,\n    x\n  ],\n  props: {\n    active: Boolean,\n    block: Boolean,\n    componentPrefix: {\n      type: String,\n      default: \"btn\"\n    },\n    disabled: Boolean,\n    label: String,\n    outline: Boolean,\n    tag: String,\n    variant: {\n      type: String,\n      default: \"primary\"\n    }\n  },\n  computed: {\n    classes() {\n      return [\n        \"btn\",\n        this.variantClass,\n        this.sizeableClass,\n        this.active && \"active\",\n        this.block && \"btn-block\",\n        this.disabled && \"disabled\"\n      ];\n    },\n    component() {\n      return this.tag ? this.tag : this.$attrs.href ? \"a\" : \"button\";\n    },\n    variantClassPrefix() {\n      return (this.variantPrefix || this.componentPrefix) + (this.outline ? \"-outline\" : \"\");\n    }\n  }\n}), P = (t, i) => {\n  const e = t.__vccOpts || t;\n  for (const [s, r] of i)\n    e[s] = r;\n  return e;\n};\nfunction b(t, i, e, s, r, m) {\n  return n(), o(l(t.component), h(t.$attrs, {\n    disabled: t.disabled,\n    class: t.classes,\n    role: \"button\"\n  }), {\n    default: f(() => [\n      c(t.$slots, \"default\", {}, () => [\n        p(d(t.label), 1)\n      ])\n    ]),\n    _: 3\n  }, 16, [\"disabled\", \"class\"]);\n}\nconst z = /* @__PURE__ */ P(v, [[\"render\", b]]);\nexport {\n  z as Btn\n};\n","var conversions = {\r\n    // length\r\n    'px': {\r\n        'px': 1,\r\n        'cm': 96.0/2.54,\r\n        'mm': 96.0/25.4,\r\n        'in': 96,\r\n        'pt': 96.0/72.0,\r\n        'pc': 16\r\n    },\r\n    'cm': {\r\n        'px': 2.54/96.0,\r\n        'cm': 1,\r\n        'mm': 0.1,\r\n        'in': 2.54,\r\n        'pt': 2.54/72.0,\r\n        'pc': 2.54/6.0\r\n    },\r\n    'mm': {\r\n        'px': 25.4/96.0,\r\n        'cm': 10,\r\n        'mm': 1,\r\n        'in': 25.4,\r\n        'pt': 25.4/72.0,\r\n        'pc': 25.4/6.0\r\n    },\r\n    'in': {\r\n        'px': 1.0/96.0,\r\n        'cm': 1.0/2.54,\r\n        'mm': 1.0/25.4,\r\n        'in': 1,\r\n        'pt': 1.0/72.0,\r\n        'pc': 1.0/6.0\r\n    },\r\n    'pt': {\r\n        'px': 0.75,\r\n        'cm': 72.0/2.54,\r\n        'mm': 72.0/25.4,\r\n        'in': 72,\r\n        'pt': 1,\r\n        'pc': 12\r\n    },\r\n    'pc': {\r\n        'px': 6.0/96.0,\r\n        'cm': 6.0/2.54,\r\n        'mm': 6.0/25.4,\r\n        'in': 6,\r\n        'pt': 6.0/72.0,\r\n        'pc': 1\r\n    },\r\n    // angle\r\n    'deg': {\r\n        'deg': 1,\r\n        'grad': 0.9,\r\n        'rad': 180/Math.PI,\r\n        'turn': 360\r\n    },\r\n    'grad': {\r\n        'deg': 400/360,\r\n        'grad': 1,\r\n        'rad': 200/Math.PI,\r\n        'turn': 400\r\n    },\r\n    'rad': {\r\n        'deg': Math.PI/180,\r\n        'grad': Math.PI/200,\r\n        'rad': 1,\r\n        'turn': Math.PI*2\r\n    },\r\n    'turn': {\r\n        'deg': 1/360,\r\n        'grad': 1/400,\r\n        'rad': 0.5/Math.PI,\r\n        'turn': 1\r\n    },\r\n    // time\r\n    's': {\r\n        's': 1,\r\n        'ms': 1/1000\r\n    },\r\n    'ms': {\r\n        's': 1000,\r\n        'ms': 1\r\n    },\r\n    // frequency\r\n    'Hz': {\r\n        'Hz': 1,\r\n        'kHz': 1000\r\n    },\r\n    'kHz': {\r\n        'Hz': 1/1000,\r\n        'kHz': 1\r\n    },\r\n    // resolution\r\n    'dpi': {\r\n        'dpi': 1,\r\n        'dpcm': 1.0/2.54,\r\n        'dppx': 1/96\r\n    },\r\n    'dpcm': {\r\n        'dpi': 2.54,\r\n        'dpcm': 1,\r\n        'dppx': 2.54/96.0\r\n    },\r\n    'dppx': {\r\n        'dpi': 96,\r\n        'dpcm': 96.0/2.54,\r\n        'dppx': 1\r\n    }\r\n};\r\n\r\nmodule.exports = function (value, sourceUnit, targetUnit, precision) {\r\n    if (!conversions.hasOwnProperty(targetUnit))\r\n        throw new Error(\"Cannot convert to \" + targetUnit);\r\n\r\n    if (!conversions[targetUnit].hasOwnProperty(sourceUnit))\r\n        throw new Error(\"Cannot convert from \" + sourceUnit + \" to \" + targetUnit);\r\n    \r\n    var converted = conversions[targetUnit][sourceUnit] * value;\r\n    \r\n    if (precision !== false) {\r\n        precision = Math.pow(10, parseInt(precision) || 5);\r\n        return Math.round(converted * precision) / precision;\r\n    }\r\n    \r\n    return converted;\r\n};\r\n","import converter, { CSSUnits } from 'css-unit-converter';\nimport { ref } from 'vue';\n\nexport type ResolveCallback = (status: boolean) => void;\n\nexport type ClickCallback = (e: Event, button: Button, modal: any, resolve: ResolveCallback) => void;\n\nexport interface Button {\n    class: null,\n    disabled: false,\n    size: 'md',\n    variant: 'primary',\n    onClick?: ClickCallback\n}\n\nexport default {\n\n    props: {\n\n        /**\n         * Custom buttons for the model.\n         *\n         * @type {Array}\n         */\n        buttons: {\n            type: [Boolean, Array],\n            default: undefined,\n            validate(value: any) {\n                return Array.isArray(value) || !value;\n            }\n        },\n\n        /**\n         * The cancel button callback function.\n         * \n         * @type {Function}\n         */\n        cancel: {\n            type: Function,\n            default(e: Event, button: Button, modal: any, resolve: Function) {\n                resolve(false);\n            }\n        },\n\n        /**\n         * The cancel button contextual object.\n         *\n         * @type {Object}\n         */\n        cancelButton: Object,\n\n        /**\n         * The confirm button callback function.\n         * \n         * @type {Function}\n         */\n        confirm: {\n            type: Function,\n            default(e: Event, button: Button, modal: any, resolve: Function) {\n                resolve(true);\n            }\n        },\n\n        /**\n         * The confirm button contextual object.\n         *\n         * @type {Object}\n         */\n        confirmButton: Object,\n\n        /**\n         * The default resolver.\n         * \n         * @property {Function}\n         */\n        resolve: {\n            type: Function,\n            default(e: Event, button: Button, modal: any, status: boolean) {\n                if(status) {\n                    modal.close();\n                }\n            }\n        },\n\n        /**\n         * Is the triggerable element showing.\n         *\n         * @property {Boolean}\n         */\n        show: {\n            type: Boolean,\n            defaut: false\n        }\n    },\n\n    methods: {\n    \n        focus() {\n            this.$el.focus();\n        },\n\n        close(e: Event) {\n            return new Promise(resolve => {\n                e = e || new Event('close', {\n                    cancelable: true\n                });\n\n                const handler = () => {\n                    this.isClosing = true;\n                    this.isShowing = false;\n                    \n                    this.transition(() => {\n                        this.isClosing = false;\n                        this.isDisplaying = false;\n                        this.$emit('closed', e);\n    \n                        resolve(this);\n                    });\n                };\n                \n                this.$emit('close', e, this.$refs.close, this, handler);\n\n                if(!e.defaultPrevented) {\n                    handler();\n                }\n            });\n        },\n\n        buttonAttributes(button: Button) {\n            return Object.assign({\n                class: null,\n                disabled: false,\n                size: 'md',\n                variant: 'primary',\n            }, Object.fromEntries(\n                Object.entries(button).filter(([key]) => {\n                    return !key.match(/^on[A-Z]/);\n                })\n            ));\n        },\n\n        open() {\n            return new Promise(resolve => {\n                const e = new Event('close', {\n                    cancelable: true\n                });\n\n                const handler = () => {\n                    this.isDisplaying = true;\n\n                    setTimeout(() => {\n                        this.isShowing = true;\n                        this.transition(() => {\n                            this.$emit('opened');\n\n                            resolve(this);\n                        });\n                    });\n                };\n\n                this.$emit('open', e, handler);\n\n                if(!e.defaultPrevented) {\n                    handler();\n                }\n            });\n        },\n\n        transition(fn: Function) {\n            const styles = getComputedStyle(this.$refs.dialog);\n                \n            const value = styles.transitionDuration.split(',')\n                .map(value => {\n                    const matches = value.trim().match(/^([\\d.]+)(\\w+)$/);\n\n                    if(!matches) {\n                        return 0;\n                    }\n\n                    const number: number = parseFloat(matches[1]);\n                    const unit: CSSUnits = <CSSUnits> matches[2];\n                    \n                    return converter(number, unit, 'ms');\n                })\n                .sort((a, b) => {\n                    return a - b;\n                })\n                .shift();\n            \n            return setTimeout(fn, value);\n        },\n\n        toggle() {\n            if(!this.isShowing) {\n                this.open();\n            }\n            else {\n                this.close();\n            }\n        },\n\n    },\n\n    computed: {\n\n        triggerableClasses() {\n            return {\n                show: this.isShowing\n            };\n        },\n\n        computedCancelButton() {\n            const button = {\n                variant: 'secondary',\n                label: 'Cancel',\n                name: 'confirm',\n                onClick: (e: Event) => {\n                    this.cancel(e, button, this, (...args: any[]) => {\n                        this.resolve(e, button, this, ...args);\n                    });\n                }\n            };\n\n            return this.cancelButton || button;\n        },\n\n        computedConfirmButton() {\n            const button = {\n                variant: 'primary',\n                label: 'Confirm',\n                name: 'confirm',\n                onClick: (e: Event) => {\n                    this.confirm(e, button, this, (...args: any[]) => {\n                        this.resolve(e, button, this, ...args);\n                    });\n                }\n            };\n\n            return this.confirmButton || button;\n        },\n\n        currentButtons() {\n            if(Array.isArray(this.buttons)) {\n                return ref(this.buttons).value.map((button: Button) => {\n                    const onClick = button.onClick || (() => undefined);\n\n                    return Object.assign(button, {\n                        onClick: (e: Event) => onClick(e, button, this, (...args: any) => {\n                            return this.resolve(e, button, this, ...args);\n                        })\n                    });\n                });\n            }\n            else if(this.type === 'alert') {\n                return [this.computedConfirmButton];\n            }\n            else if(this.type === 'confirm') {\n                return [\n                    this.computedConfirmButton,\n                    this.computedCancelButton\n                ];\n            }\n        }\n    },\n\n    watch: {\n        isShowing(value: boolean) {\n            if(value) {\n                this.focus();\n            }\n        },\n\n        show(value: boolean) {\n            if(value) {\n                this.open();\n            }\n        }\n    },\n\n    mounted() {\n        if(this.show) {\n            this.open();\n        }\n    },\n\n    data() {\n        return {\n            isClosing: false,\n            isShowing: false,\n            isDisplaying: false,\n        };\n    }\n\n};\n","<script lang=\"ts\">\nimport { Btn } from '@vue-interface/btn';\nimport { defineComponent } from 'vue';\nimport Triggerable from './Triggerable.js';\n\nexport default defineComponent({\n\n    name: 'Modal',\n\n    components: {\n        Btn\n    },\n\n    mixins: [\n        Triggerable\n    ],\n\n    beforeRouteLeave() {\n        this.close();\n    },\n\n    props: {\n        /**\n         * Show the modal with a backdrop.\n         *\n         * @type {Boolean}\n         */\n        backdrop: {\n            type: Boolean,\n            default: true\n        },\n\n        /**\n         * Is the modal centered in the screen.\n         *\n         * @type {Boolean}\n         */\n        center: Boolean,\n\n        /**\n         * Is the modal content fixed position\n         *\n         * @type {Boolean}\n         */\n        closeable: {\n            type: Boolean,\n            default: true\n        },\n\n        /**\n         * Should show the modal footer.\n         *\n         * @type {Boolean}\n         */\n        footer: {\n            type: Boolean,\n            default: true\n        },\n\n        /**\n         * Should show the modal footer.\n         *\n         * @type {Boolean}\n         */\n        indicator: {\n            type: Object,\n            default: undefined\n        },\n\n        /**\n         * The modal title.\n         *\n         * @type {String}\n         */\n        title: {\n            type: String,\n            default: undefined\n        },\n\n        /**\n         * Is the modal type.\n         *\n         * @type {Boolean}\n         */\n        type: {\n            type: [Boolean, String],\n            default: false,\n            validate(value: any) {\n                return ['alert', 'confirm'].indexOf(value) !== -1;\n            }\n        }\n    },\n\n    watch: {\n        isShowing(value) {            \n            document.querySelector('body')?.classList[value ? 'add' : 'remove']('modal-open');\n        }\n    }\n\n});\n</script>\n\n<template>\n    <div\n        class=\"modal fade\"\n        :class=\"{...triggerableClasses}\"\n        :style=\"{display: isDisplaying ? 'block' : 'none'}\"\n        tabindex=\"-1\"\n        @keydown.esc=\"close\">\n        <slot name=\"backdrop\">\n            <div\n                v-if=\"backdrop && isDisplaying\" \n                ref=\"backdrop\"\n                class=\"modal-backdrop fade\"\n                :class=\"{'show': isShowing}\"\n                @click=\"closeable && close\" />\n        </slot>\n        \n        <div\n            ref=\"dialog\"\n            class=\"modal-dialog\"\n            :class=\"{'modal-dialog-centered': center}\">\n            <div class=\"modal-content\">\n                <slot name=\"header\">\n                    <div class=\"modal-header\">\n                        <slot name=\"title\">\n                            <h3\n                                v-if=\"title\"\n                                class=\"modal-title\">\n                                {{ title }}\n                            </h3>\n                        </slot>\n\n                        <slot name=\"close-button\">\n                            <button\n                                v-if=\"closeable\"\n                                ref=\"close\"\n                                type=\"button\"\n                                class=\"close\"\n                                data-dismiss=\"modal\"\n                                aria-label=\"Close\"\n                                :disabled=\"isClosing\"\n                                @click=\"close\">\n                                <span aria-hidden=\"true\">&times;</span>\n                            </button>\n                        </slot>\n                    </div>\n                </slot>\n\n                <slot name=\"body\">\n                    <Suspense>\n                        <div class=\"modal-body\">\n                            <slot ref=\"content\" />\n                        </div>\n                        <template #fallback>\n                            <component :is=\"indicator\" />\n                        </template>\n                    </Suspense>\n                </slot>\n                \n                <slot\n                    v-if=\"footer\"\n                    name=\"footer\"\n                    :close=\"close\">\n                    <div\n                        v-if=\"currentButtons.length\"\n                        ref=\"footer\"\n                        class=\"modal-footer\">\n                        <div class=\"modal-footer-buttons\">\n                            <template v-if=\"currentButtons.length\">\n                                <btn\n                                    v-for=\"(button, i) in currentButtons\"\n                                    :key=\"`btn-${i}`\"\n                                    v-bind=\"button\" />\n                            </template>\n                        </div>\n                    </div>\n                </slot>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style>\n.modal-footer-buttons {\n    display: flex;\n    align-items: center;\n    flex-direction: row-reverse;\n    grid-gap: .5rem;\n    align-items: center;\n}\n</style>","import { App, h, render, VNode } from 'vue';\n\ninterface ModalParams {\n    title: string,\n    content: VNode,\n    resolve: Function,\n    reject: Function,\n    promise: () => Promise<any>,\n    props: Record<string,any>\n}\n\nexport default class ModalFactory {\n    constructor(\n        protected readonly app: App,\n        protected readonly props: Record<string, any>\n    ) {\n        //\n    }\n\n    mount(vnode: VNode) {\n        vnode.appContext = this.app._context;\n\n        const el = document.createElement('div');\n\n        render(h(vnode), el);\n\n        document.body.append(el);\n    }\n    \n    register(type: string, callback: (params: ModalParams) => VNode) {\n        Object.defineProperty(this, type, {\n            value: (title: string, content: string|((app: App, props: Record<string,any>) => VNode), props: Record<string,any>) => {\n                const promise = new Promise((resolve, reject) => {\n                    this.mount(callback({\n                        title,\n                        props: Object.assign({}, this.props, props),\n                        resolve: (value: any) => {\n                            resolve(value);\n\n                            return promise;\n                        },\n                        reject: (value: any) => {\n                            reject(value);\n\n                            return promise;\n                        },\n                        promise: () => promise,\n                        content: typeof content === 'string'\n                            ? h('div', content)\n                            : content(this.app, props)\n                    }));\n                });\n    \n                return promise;\n            }\n        });\n    }\n\n}","import { h } from 'vue';\nimport Modal from './Modal.vue';\nimport ModalFactory from './ModalFactory';\n\nexport default (app: any, props = {}) => {\n    const factory = new ModalFactory(app, props);\n\n    /**\n     * Dispatch an alert modal.\n     * \n     * @property {String} title\n     * @property {Function|String} content\n     * @property {Object} props\n     */\n    factory.register('alert', ({ title, content, props }) => {\n        return h(Modal, Object.assign({\n            title,\n            show: true,\n            type: 'alert'\n        }, props), {\n            default: () => h(content, Object.assign({\n                ref: 'content'\n            }))\n        });\n    });\n\n    /**\n     * Dispatch a confirmation modal.\n     * \n     * @property {String} title\n     * @property {Function|String} content\n     * @property {Object} props\n     */\n    factory.register('confirm', ({ title, content, props }) => {\n        return h(Modal, Object.assign({\n            title,\n            show: true,\n            type: 'confirm'\n        }, props), {\n            default: () => h(content, Object.assign({\n                ref: 'content',\n            }))\n        });\n    });\n\n    app.provide('modal', factory);\n    app.config.globalProperties.$modal = factory;\n};"],"names":["u","x","v","a","P","t","i","e","s","r","b","m","n","o","l","h","f","c","p","d","z","conversions","cssUnitConverter","value","sourceUnit","targetUnit","precision","converted","Triggerable","button","modal","resolve","status","handler","key","fn","matches","number","unit","converter","args","ref","onClick","_sfc_main","defineComponent","Btn","_a","_hoisted_3","_hoisted_5","_createElementVNode","_hoisted_8","_resolveComponent","_openBlock","_createElementBlock","_normalizeClass","_ctx","_cache","_withKeys","_createCommentVNode","_hoisted_1","_renderSlot","_hoisted_2","_toDisplayString","_createBlock","_Suspense","_withCtx","_resolveDynamicComponent","_hoisted_7","_hoisted_9","_Fragment","_renderList","_component_btn","_mergeProps","ModalFactory","app","props","vnode","el","render","type","callback","title","content","promise","reject","ModalPlugin","factory","Modal"],"mappings":";AACA,MAAMA,IAAI;AAAA,EACR,OAAO;AAAA,IACL,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACN,YAAY;AAAA,EACb;AAAA,EACD,UAAU;AAAA,IACR,sBAAsB;AACpB,aAAO,KAAK,cAAc,KAAK;AAAA,IAChC;AAAA,IACD,oBAAoB;AAClB,aAAO,KAAK,SAAS,SAAS,KAAK,CAAC,CAAC,KAAK,KAAK,MAAM,IAAI,OAAO,IAAI,KAAK,qBAAqB,CAAC;AAAA,IAChG;AAAA,IACD,gBAAgB;AACd,aAAO,KAAK,OAAO,CAAC,KAAK,uBAAuB,KAAK,oBAAoB,KAAK,OAAO,GAAG,KAAK,uBAAuB,KAAK,SAAS;AAAA,IACnI;AAAA,EACF;AACH,GAAGC,IAAI;AAAA,EACL,OAAO;AAAA,IACL,iBAAiB;AAAA,IACjB,SAAS;AAAA,IACT,eAAe;AAAA,EAChB;AAAA,EACD,UAAU;AAAA,IACR,qBAAqB;AACnB,aAAO,KAAK,iBAAiB,KAAK;AAAA,IACnC;AAAA,IACD,mBAAmB;AACjB,aAAO,KAAK,YAAY,SAAS,KAAK,CAAC,CAAC,KAAK,QAAQ,MAAM,IAAI,OAAO,IAAI,KAAK,oBAAoB,CAAC;AAAA,IACrG;AAAA,IACD,eAAe;AACb,aAAO,KAAK,UAAU,CAAC,KAAK,sBAAsB,KAAK,mBAAmB,KAAK,UAAU,GAAG,KAAK,sBAAsB,KAAK,YAAY;AAAA,IACzI;AAAA,EACF;AACH,GAAGC,IAAIC,EAAE;AAAA,EACP,QAAQ;AAAA,IACNH;AAAA,IACAC;AAAA,EACD;AAAA,EACD,OAAO;AAAA,IACL,QAAQ;AAAA,IACR,OAAO;AAAA,IACP,iBAAiB;AAAA,MACf,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,IACD,UAAU;AAAA,IACV,OAAO;AAAA,IACP,SAAS;AAAA,IACT,KAAK;AAAA,IACL,SAAS;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACF;AAAA,EACD,UAAU;AAAA,IACR,UAAU;AACR,aAAO;AAAA,QACL;AAAA,QACA,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK,UAAU;AAAA,QACf,KAAK,SAAS;AAAA,QACd,KAAK,YAAY;AAAA,MACzB;AAAA,IACK;AAAA,IACD,YAAY;AACV,aAAO,KAAK,MAAM,KAAK,MAAM,KAAK,OAAO,OAAO,MAAM;AAAA,IACvD;AAAA,IACD,qBAAqB;AACnB,cAAQ,KAAK,iBAAiB,KAAK,oBAAoB,KAAK,UAAU,aAAa;AAAA,IACpF;AAAA,EACF;AACH,CAAC,GAAGG,IAAI,CAACC,GAAGC,MAAM;AAChB,QAAMC,IAAIF,EAAE,aAAaA;AACzB,aAAW,CAACG,GAAGC,CAAC,KAAKH;AACnB,IAAAC,EAAEC,CAAC,IAAIC;AACT,SAAOF;AACT;AACA,SAASG,EAAEL,GAAGC,GAAGC,GAAGC,GAAGC,GAAGE,GAAG;AAC3B,SAAOC,EAAC,GAAIC,EAAEC,EAAET,EAAE,SAAS,GAAGU,EAAEV,EAAE,QAAQ;AAAA,IACxC,UAAUA,EAAE;AAAA,IACZ,OAAOA,EAAE;AAAA,IACT,MAAM;AAAA,EACV,CAAG,GAAG;AAAA,IACF,SAASW,EAAE,MAAM;AAAA,MACfC,EAAEZ,EAAE,QAAQ,WAAW,CAAE,GAAE,MAAM;AAAA,QAC/Ba,EAAEC,EAAEd,EAAE,KAAK,GAAG,CAAC;AAAA,MACvB,CAAO;AAAA,IACP,CAAK;AAAA,IACD,GAAG;AAAA,EACJ,GAAE,IAAI,CAAC,YAAY,OAAO,CAAC;AAC9B;AACA,MAAMe,IAAoB,gBAAAhB,EAAEF,GAAG,CAAC,CAAC,UAAUQ,CAAC,CAAC,CAAC;AC9F9C,IAAIW,IAAc;AAAA;AAAA,EAEd,IAAM;AAAA,IACF,IAAM;AAAA,IACN,IAAM,KAAK;AAAA,IACX,IAAM,KAAK;AAAA,IACX,IAAM;AAAA,IACN,IAAM,KAAK;AAAA,IACX,IAAM;AAAA,EACT;AAAA,EACD,IAAM;AAAA,IACF,IAAM,OAAK;AAAA,IACX,IAAM;AAAA,IACN,IAAM;AAAA,IACN,IAAM;AAAA,IACN,IAAM,OAAK;AAAA,IACX,IAAM,OAAK;AAAA,EACd;AAAA,EACD,IAAM;AAAA,IACF,IAAM,OAAK;AAAA,IACX,IAAM;AAAA,IACN,IAAM;AAAA,IACN,IAAM;AAAA,IACN,IAAM,OAAK;AAAA,IACX,IAAM,OAAK;AAAA,EACd;AAAA,EACD,IAAM;AAAA,IACF,IAAM,IAAI;AAAA,IACV,IAAM,IAAI;AAAA,IACV,IAAM,IAAI;AAAA,IACV,IAAM;AAAA,IACN,IAAM,IAAI;AAAA,IACV,IAAM,IAAI;AAAA,EACb;AAAA,EACD,IAAM;AAAA,IACF,IAAM;AAAA,IACN,IAAM,KAAK;AAAA,IACX,IAAM,KAAK;AAAA,IACX,IAAM;AAAA,IACN,IAAM;AAAA,IACN,IAAM;AAAA,EACT;AAAA,EACD,IAAM;AAAA,IACF,IAAM,IAAI;AAAA,IACV,IAAM,IAAI;AAAA,IACV,IAAM,IAAI;AAAA,IACV,IAAM;AAAA,IACN,IAAM,IAAI;AAAA,IACV,IAAM;AAAA,EACT;AAAA;AAAA,EAED,KAAO;AAAA,IACH,KAAO;AAAA,IACP,MAAQ;AAAA,IACR,KAAO,MAAI,KAAK;AAAA,IAChB,MAAQ;AAAA,EACX;AAAA,EACD,MAAQ;AAAA,IACJ,KAAO,MAAI;AAAA,IACX,MAAQ;AAAA,IACR,KAAO,MAAI,KAAK;AAAA,IAChB,MAAQ;AAAA,EACX;AAAA,EACD,KAAO;AAAA,IACH,KAAO,KAAK,KAAG;AAAA,IACf,MAAQ,KAAK,KAAG;AAAA,IAChB,KAAO;AAAA,IACP,MAAQ,KAAK,KAAG;AAAA,EACnB;AAAA,EACD,MAAQ;AAAA,IACJ,KAAO,IAAE;AAAA,IACT,MAAQ,IAAE;AAAA,IACV,KAAO,MAAI,KAAK;AAAA,IAChB,MAAQ;AAAA,EACX;AAAA;AAAA,EAED,GAAK;AAAA,IACD,GAAK;AAAA,IACL,IAAM,IAAE;AAAA,EACX;AAAA,EACD,IAAM;AAAA,IACF,GAAK;AAAA,IACL,IAAM;AAAA,EACT;AAAA;AAAA,EAED,IAAM;AAAA,IACF,IAAM;AAAA,IACN,KAAO;AAAA,EACV;AAAA,EACD,KAAO;AAAA,IACH,IAAM,IAAE;AAAA,IACR,KAAO;AAAA,EACV;AAAA;AAAA,EAED,KAAO;AAAA,IACH,KAAO;AAAA,IACP,MAAQ,IAAI;AAAA,IACZ,MAAQ,IAAE;AAAA,EACb;AAAA,EACD,MAAQ;AAAA,IACJ,KAAO;AAAA,IACP,MAAQ;AAAA,IACR,MAAQ,OAAK;AAAA,EAChB;AAAA,EACD,MAAQ;AAAA,IACJ,KAAO;AAAA,IACP,MAAQ,KAAK;AAAA,IACb,MAAQ;AAAA,EACX;AACL,GAEAC,IAAiB,SAAUC,GAAOC,GAAYC,GAAYC,GAAW;AACjE,MAAI,CAACL,EAAY,eAAeI,CAAU;AACtC,UAAM,IAAI,MAAM,uBAAuBA,CAAU;AAErD,MAAI,CAACJ,EAAYI,CAAU,EAAE,eAAeD,CAAU;AAClD,UAAM,IAAI,MAAM,yBAAyBA,IAAa,SAASC,CAAU;AAE7E,MAAIE,IAAYN,EAAYI,CAAU,EAAED,CAAU,IAAID;AAEtD,SAAIG,MAAc,MACdA,IAAY,KAAK,IAAI,IAAI,SAASA,CAAS,KAAK,CAAC,GAC1C,KAAK,MAAMC,IAAYD,CAAS,IAAIA,KAGxCC;AACX;AC/GA,MAAeC,IAAA;AAAA,EAEX,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOH,SAAS;AAAA,MACL,MAAM,CAAC,SAAS,KAAK;AAAA,MACrB,SAAS;AAAA,MACT,SAASL,GAAY;AACjB,eAAO,MAAM,QAAQA,CAAK,KAAK,CAACA;AAAA,MACpC;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,QAAQ;AAAA,MACJ,MAAM;AAAA,MACN,QAAQ,GAAUM,GAAgBC,GAAYC,GAAmB;AAC7D,QAAAA,EAAQ,EAAK;AAAA,MACjB;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOd,SAAS;AAAA,MACL,MAAM;AAAA,MACN,QAAQ,GAAUF,GAAgBC,GAAYC,GAAmB;AAC7D,QAAAA,EAAQ,EAAI;AAAA,MAChB;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOf,SAAS;AAAA,MACL,MAAM;AAAA,MACN,QAAQ,GAAUF,GAAgBC,GAAYE,GAAiB;AAC3D,QAAGA,KACCF,EAAM,MAAM;AAAA,MAEpB;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,MAAM;AAAA,MACF,MAAM;AAAA,MACN,QAAQ;AAAA,IACZ;AAAA,EACJ;AAAA,EAEA,SAAS;AAAA,IAEL,QAAQ;AACJ,WAAK,IAAI;IACb;AAAA,IAEA,MAAM,GAAU;AACL,aAAA,IAAI,QAAQ,CAAWC,MAAA;AACtB,YAAA,KAAK,IAAI,MAAM,SAAS;AAAA,UACxB,YAAY;AAAA,QAAA,CACf;AAED,cAAME,IAAU,MAAM;AAClB,eAAK,YAAY,IACjB,KAAK,YAAY,IAEjB,KAAK,WAAW,MAAM;AAClB,iBAAK,YAAY,IACjB,KAAK,eAAe,IACf,KAAA,MAAM,UAAU,CAAC,GAEtBF,EAAQ,IAAI;AAAA,UAAA,CACf;AAAA,QAAA;AAGL,aAAK,MAAM,SAAS,GAAG,KAAK,MAAM,OAAO,MAAME,CAAO,GAElD,EAAE,oBACMA;MACZ,CACH;AAAA,IACL;AAAA,IAEA,iBAAiBJ,GAAgB;AAC7B,aAAO,OAAO,OAAO;AAAA,QACjB,OAAO;AAAA,QACP,UAAU;AAAA,QACV,MAAM;AAAA,QACN,SAAS;AAAA,SACV,OAAO;AAAA,QACN,OAAO,QAAQA,CAAM,EAAE,OAAO,CAAC,CAACK,CAAG,MACxB,CAACA,EAAI,MAAM,UAAU,CAC/B;AAAA,MAAA,CACJ;AAAA,IACL;AAAA,IAEA,OAAO;AACI,aAAA,IAAI,QAAQ,CAAWH,MAAA;AACpB,cAAAxB,IAAI,IAAI,MAAM,SAAS;AAAA,UACzB,YAAY;AAAA,QAAA,CACf,GAEK0B,IAAU,MAAM;AAClB,eAAK,eAAe,IAEpB,WAAW,MAAM;AACb,iBAAK,YAAY,IACjB,KAAK,WAAW,MAAM;AAClB,mBAAK,MAAM,QAAQ,GAEnBF,EAAQ,IAAI;AAAA,YAAA,CACf;AAAA,UAAA,CACJ;AAAA,QAAA;AAGA,aAAA,MAAM,QAAQxB,GAAG0B,CAAO,GAEzB1B,EAAE,oBACM0B;MACZ,CACH;AAAA,IACL;AAAA,IAEA,WAAWE,GAAc;AAGf,YAAAZ,IAFS,iBAAiB,KAAK,MAAM,MAAM,EAE5B,mBAAmB,MAAM,GAAG,EAC5C,IAAI,CAAAA,MAAS;AACV,cAAMa,IAAUb,EAAM,KAAK,EAAE,MAAM,iBAAiB;AAEpD,YAAG,CAACa;AACO,iBAAA;AAGX,cAAMC,IAAiB,WAAWD,EAAQ,CAAC,CAAC,GACtCE,IAA4BF,EAAQ,CAAC;AAEpC,eAAAG,EAAUF,GAAQC,GAAM,IAAI;AAAA,MACtC,CAAA,EACA,KAAK,CAACnC,GAAGO,MACCP,IAAIO,CACd,EACA,MAAM;AAEJ,aAAA,WAAWyB,GAAIZ,CAAK;AAAA,IAC/B;AAAA,IAEA,SAAS;AACF,MAAC,KAAK,YAIL,KAAK,MAAM,IAHX,KAAK,KAAK;AAAA,IAKlB;AAAA,EAEJ;AAAA,EAEA,UAAU;AAAA,IAEN,qBAAqB;AACV,aAAA;AAAA,QACH,MAAM,KAAK;AAAA,MAAA;AAAA,IAEnB;AAAA,IAEA,uBAAuB;AACnB,YAAMM,IAAS;AAAA,QACX,SAAS;AAAA,QACT,OAAO;AAAA,QACP,MAAM;AAAA,QACN,SAAS,CAACtB,MAAa;AACnB,eAAK,OAAOA,GAAGsB,GAAQ,MAAM,IAAIW,MAAgB;AAC7C,iBAAK,QAAQjC,GAAGsB,GAAQ,MAAM,GAAGW,CAAI;AAAA,UAAA,CACxC;AAAA,QACL;AAAA,MAAA;AAGJ,aAAO,KAAK,gBAAgBX;AAAA,IAChC;AAAA,IAEA,wBAAwB;AACpB,YAAMA,IAAS;AAAA,QACX,SAAS;AAAA,QACT,OAAO;AAAA,QACP,MAAM;AAAA,QACN,SAAS,CAACtB,MAAa;AACnB,eAAK,QAAQA,GAAGsB,GAAQ,MAAM,IAAIW,MAAgB;AAC9C,iBAAK,QAAQjC,GAAGsB,GAAQ,MAAM,GAAGW,CAAI;AAAA,UAAA,CACxC;AAAA,QACL;AAAA,MAAA;AAGJ,aAAO,KAAK,iBAAiBX;AAAA,IACjC;AAAA,IAEA,iBAAiB;AACb,UAAG,MAAM,QAAQ,KAAK,OAAO;AACzB,eAAOY,EAAI,KAAK,OAAO,EAAE,MAAM,IAAI,CAACZ,MAAmB;AAC7C,gBAAAa,IAAUb,EAAO,YAAY,MAAM;AAAA;AAElC,iBAAA,OAAO,OAAOA,GAAQ;AAAA,YACzB,SAAS,CAACtB,MAAamC,EAAQnC,GAAGsB,GAAQ,MAAM,IAAIW,MACzC,KAAK,QAAQjC,GAAGsB,GAAQ,MAAM,GAAGW,CAAI,CAC/C;AAAA,UAAA,CACJ;AAAA,QAAA,CACJ;AACL,UACQ,KAAK,SAAS;AACX,eAAA,CAAC,KAAK,qBAAqB;AACtC,UACQ,KAAK,SAAS;AACX,eAAA;AAAA,UACH,KAAK;AAAA,UACL,KAAK;AAAA,QAAA;AAAA,IAGjB;AAAA,EACJ;AAAA,EAEA,OAAO;AAAA,IACH,UAAUjB,GAAgB;AACtB,MAAGA,KACC,KAAK,MAAM;AAAA,IAEnB;AAAA,IAEA,KAAKA,GAAgB;AACjB,MAAGA,KACC,KAAK,KAAK;AAAA,IAElB;AAAA,EACJ;AAAA,EAEA,UAAU;AACN,IAAG,KAAK,QACJ,KAAK,KAAK;AAAA,EAElB;AAAA,EAEA,OAAO;AACI,WAAA;AAAA,MACH,WAAW;AAAA,MACX,WAAW;AAAA,MACX,cAAc;AAAA,IAAA;AAAA,EAEtB;AAEJ,GChSAoB,IAAeC,EAAgB;AAAA,EAE3B,MAAM;AAAA,EAEN,YAAY;AAAA,IAAA,KACRC;AAAAA,EACJ;AAAA,EAEA,QAAQ;AAAA,IACJjB;AAAA,EACJ;AAAA,EAEA,mBAAmB;AACf,SAAK,MAAM;AAAA,EACf;AAAA,EAEA,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMH,UAAU;AAAA,MACN,MAAM;AAAA,MACN,SAAS;AAAA,IACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,QAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOR,WAAW;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,QAAQ;AAAA,MACJ,MAAM;AAAA,MACN,SAAS;AAAA,IACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,WAAW;AAAA,MACP,MAAM;AAAA,MACN,SAAS;AAAA,IACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,OAAO;AAAA,MACH,MAAM;AAAA,MACN,SAAS;AAAA,IACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAOA,MAAM;AAAA,MACF,MAAM,CAAC,SAAS,MAAM;AAAA,MACtB,SAAS;AAAA,MACT,SAASL,GAAY;AACjB,eAAO,CAAC,SAAS,SAAS,EAAE,QAAQA,CAAK,MAAM;AAAA,MACnD;AAAA,IACJ;AAAA,EACJ;AAAA,EAEA,OAAO;AAAA,IACH,UAAUA,GAAO;;AACJ,OAAAuB,IAAA,SAAA,cAAc,MAAM,MAApB,QAAAA,EAAuB,UAAUvB,IAAQ,QAAQ,UAAU;AAAA,IACxE;AAAA,EACJ;AAEJ,CAAC;;;;;;kEA6B+BwB,IAAM;AAAA,EAAA,KAAA;AAAA;qBAeNC,IAAuCC,gBAAAA,EAAA,QAAA,EAAA,eAAA,UAAA,KAAA,EAAA;;gCAuB5CC,IAAS;AAAA,EACZ,KAAK;AAAA,EAAA,KAAA;AAAA;;;YAhEzBC,EA6EM,KAAA;SA1EIC,EAAY,GAAAC,EAAA,OAAA;AAAA,IAClB,OAAaC,EAAA,CAAA,cAAA,EAAA,GAAAC,EAAA,mBAAA,CAAA,CAAA;AAAA,IACZ,SAAO,EAAM,SAAAA,EAAA,eAAA,UAAA,QAAA;AAAA,IAAA,UAAA;AAAA,IACd,WAOOC,EAAA,CAAA,MAAAA,EAAA,CAAA,IAAAC,EAAA,IAAAjB,MAAAe,EAAA,SAAAA,EAAA,MAAA,GAAAf,CAAA,GAAA,CAAA,KAAA,CAAA;AAAA,EAAA,GAAA;AAAA,gBANH,YAKkC,CAAA,GAAA,MAAA;AAAA,MAAAe,EAAA,YAAAA,EAAA,gBAAAH,EAHhB,GAAAC,EAAA,OAAA;AAAA,QACd,KAAK;AAAA,QAEJ,KAAA;AAAA,QAAA,OAAAC,EAAA,CAAA,uBAAA,EAAA,MAAAC,EAAA,UAAA,CAAA,CAAA;AAAA;qBAGTG,EA6DM,IAAA,EAAA;AAAA,IAAA,CAAA;AAAA,MA3DG,OAAC;AAAA,MAAA,KAAA;AAAA,MAEN,OAwDMJ,EAAA,CAAA,gBAAA,EAAA,yBAAAC,EAAA,OAAA,CAAA,CAAA;AAAA,IAAA,GAAA;AAAA,MAtDEN,EAAA,OAsBMU,GAtBN;AAAA,QAAAC,EACIL,EAMO,QAAA,UAAA,CAAA,GAAA,MAAA;AAAA,UAJYN,EAAA,OAAAY,GAAA;AAAA,YAAAD,EAAAL,EAAA,QADf,SAIK,CAAA,GAAA,MAAA;AAAA,cAAAA,EAAA,SAAAH,EAAA,GAAAC,EAAA,MAAAN,GAAAe,EAAAP,EAAA,KAAA,GAAA,CAAA,KAGTG,EAYO,IAAA,EAAA;AAAA,YAAA,CAAA;AAAA,wBAXH,gBAUS,CAAA,GAAA,MAAA;AAAA,cAAAH,EAAA,aAAAH,KARMC,EAAA,UAAA;AAAA,gBACX,KAAI;AAAA,gBACJ,KAAK;AAAA,gBACL,MAAA;AAAA,gBACA,OAAA;AAAA,gBACC,gBAAU;AAAA,gBACV,cAAK;AAAA,gBAAA,UAAAE,EAAA;AAAA;;;UAOtB,CAAA;AAAA,QAAA,CAAA;AAAA,UAK2BA,EACc,QAAA,QAAA,CAAA,GAAA,MAAA;AAAA,WAAAH,KAAAW,EAA7BC,GAA6B,MAAA;AAAA,YAAA,UAAAC,EAAA,MAAA;AAAA,eAF3Bb,EAAA,GAAAW,EAAAG,EAAAX,EAAA,SAAA,CAAA;AAAA,YAAA,CAAA;AAAA,qBADFU,EAAsB,MAAA;AAAA,cAAAhB,EAAA,OAAAkB,GAAA;AAAA;;;;UASxB,CAAA;AAAA,QAAA,CAAA;AAAA,qBAEEZ,EAAK,QAAA,UAAA;AAAA,UAcV,KAAA;AAAA,UAZO,OAAAA,EAAA;AAAA,QAAA,GAAA,MAAA;AAAA,UAGNA,EAAA,eAAA,UAAAH,EACyC,GAAAC,EAAA,OAAAH,GAAA;AAAA,YACjCD,EAAA,OAAAmB,GAAA;AAAA,cAAAb,EAAA,eAAA,UAAAH,EAEQ,EAAS,GAACC,EAAAgB,GAAA,EAAA,KAAA,EAAA,GAAAC,EAAAf,EAAA,gBAAA,CAAA1B,GAAAvB,OACN8C,EAAM,GAAAW,EAAAQ,GAAAC,EAAA;AAAA,gBAAA,KAAA,OAAAlE;AAAA;;;;;;;;;AClKlD,MAAqBmE,GAAa;AAAA,EAC9B,YACuBC,GACAC,GACrB;AAFqB,SAAA,MAAAD,GACA,KAAA,QAAAC;AAAA,EAGvB;AAAA,EAEA,MAAMC,GAAc;AACV,IAAAA,EAAA,aAAa,KAAK,IAAI;AAEtB,UAAAC,IAAK,SAAS,cAAc,KAAK;AAEhC,IAAAC,EAAA,EAAEF,CAAK,GAAGC,CAAE,GAEV,SAAA,KAAK,OAAOA,CAAE;AAAA,EAC3B;AAAA,EAEA,SAASE,GAAcC,GAA0C;AACtD,WAAA,eAAe,MAAMD,GAAM;AAAA,MAC9B,OAAO,CAACE,GAAeC,GAAkEP,MAA8B;AACnH,cAAMQ,IAAU,IAAI,QAAQ,CAACpD,GAASqD,MAAW;AAC7C,eAAK,MAAMJ,EAAS;AAAA,YAChB,OAAAC;AAAA,YACA,OAAO,OAAO,OAAO,CAAI,GAAA,KAAK,OAAON,CAAK;AAAA,YAC1C,SAAS,CAACpD,OACNQ,EAAQR,CAAK,GAEN4D;AAAA,YAEX,QAAQ,CAAC5D,OACL6D,EAAO7D,CAAK,GAEL4D;AAAA,YAEX,SAAS,MAAMA;AAAA,YACf,SAAS,OAAOD,KAAY,WACtB,EAAE,OAAOA,CAAO,IAChBA,EAAQ,KAAK,KAAKP,CAAK;AAAA,UAChC,CAAA,CAAC;AAAA,QAAA,CACL;AAEM,eAAAQ;AAAA,MACX;AAAA,IAAA,CACH;AAAA,EACL;AAEJ;ACtDA,MAAAE,KAAe,CAACX,GAAUC,IAAQ,OAAO;AACrC,QAAMW,IAAU,IAAIb,GAAaC,GAAKC,CAAK;AASnC,EAAAW,EAAA,SAAS,SAAS,CAAC,EAAE,OAAAL,GAAO,SAAAC,GAAS,OAAAP,QAClC,EAAEY,GAAO,OAAO,OAAO;AAAA,IAC1B,OAAAN;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,EACV,GAAGN,CAAK,GAAG;AAAA,IACP,SAAS,MAAM,EAAEO,GAAS,OAAO,OAAO;AAAA,MACpC,KAAK;AAAA,IAAA,CACR,CAAC;AAAA,EAAA,CACL,CACJ,GASOI,EAAA,SAAS,WAAW,CAAC,EAAE,OAAAL,GAAO,SAAAC,GAAS,OAAAP,QACpC,EAAEY,GAAO,OAAO,OAAO;AAAA,IAC1B,OAAAN;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,EACV,GAAGN,CAAK,GAAG;AAAA,IACP,SAAS,MAAM,EAAEO,GAAS,OAAO,OAAO;AAAA,MACpC,KAAK;AAAA,IAAA,CACR,CAAC;AAAA,EAAA,CACL,CACJ,GAEGR,EAAA,QAAQ,SAASY,CAAO,GACxBZ,EAAA,OAAO,iBAAiB,SAASY;AACzC;"}