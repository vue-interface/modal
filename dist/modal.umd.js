(function(c,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(c=typeof globalThis<"u"?globalThis:c||self,e(c.Modal={},c.Vue))})(this,function(c,e){"use strict";const g={name:"Btn",mixins:[{props:{componentPrefix:String,size:String,sizePrefix:String},computed:{sizeableClassPrefix(){return this.sizePrefix||this.componentPrefix},hasSizeablePrefix(){return this.size&&!!this.size.match(new RegExp(`^${this.sizeableClassPrefix}`))},sizeableClass(){return this.size?!this.sizeableClassPrefix||this.hasSizeablePrefix?this.size:`${this.sizeableClassPrefix}-${this.size}`:""}}},{props:{componentPrefix:String,variant:String,variantPrefix:String},computed:{variantClassPrefix(){return this.variantPrefix||this.componentPrefix},hasVariantPrefix(){return this.variant&&!!this.variant.match(new RegExp(`^${this.variantClassPrefix}`))},variantClass(){return this.variant?!this.variantClassPrefix||this.hasVariantPrefix?this.variant:`${this.variantClassPrefix}-${this.variant}`:""}}}],props:{active:Boolean,block:Boolean,componentPrefix:{type:String,default:"btn"},disabled:Boolean,label:String,outline:Boolean,tag:String,variant:{type:String,default:"primary"}},computed:{classes(){return["btn",this.variantClass,this.sizeableClass,this.active&&"active",this.block&&"btn-block",this.disabled&&"disabled"]},component(){return this.tag?this.tag:this.$attrs.href?"a":"button"},variantClassPrefix(){return(this.variantPrefix||this.componentPrefix)+(this.outline?"-outline":"")}}},p=(t,n)=>{const s=t.__vccOpts||t;for(const[r,i]of n)s[r]=i;return s};function y(t,n,s,r,i,o){return e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.component),e.mergeProps(t.$attrs,{disabled:s.disabled,class:o.classes,role:"button"}),{default:e.withCtx(()=>[e.renderSlot(t.$slots,"default",{},()=>[e.createTextVNode(e.toDisplayString(s.label),1)])]),_:3},16,["disabled","class"])}const B=p(g,[["render",y]]);var m={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},C=function(t,n,s,r){if(!m.hasOwnProperty(s))throw new Error("Cannot convert to "+s);if(!m[s].hasOwnProperty(n))throw new Error("Cannot convert from "+n+" to "+s);var i=m[s][n]*t;return r!==!1?(r=Math.pow(10,parseInt(r)||5),Math.round(i*r)/r):i};const P={props:{buttons:{type:[Boolean,Array],default:void 0,validate(t){return Array.isArray(t)||!t}},cancel:{type:Function,default(t,n,s,r){r(!1)}},cancelButton:Object,confirm:{type:Function,default(t,n,s,r){r(!0)}},confirmButton:Object,resolve:{type:Function,default(t,n,s,r){}},show:{type:Boolean,defaut:!1}},methods:{focus(){this.$el.focus()},close(t){return new Promise(n=>{t=t||new Event("close",{cancelable:!0});const s=()=>{this.isClosing=!0,this.isShowing=!1,this.transition(()=>{this.isClosing=!1,this.isDisplaying=!1,this.$emit("closed",t),n(this)})};this.$emit("close",t,this.$refs.close,this,s),t.defaultPrevented||s()})},buttonAttributes(t){return Object.assign({class:null,disabled:!1,size:"md",variant:"primary"},Object.fromEntries(Object.entries(t).filter(([n,s])=>!n.match(/^on[A-Z]/))))},buttonListeners(t,n){return Object.fromEntries(Object.entries(t).map(([s,r])=>[s,r,s.match(/^on([A-Z]\w+)/)]).map(([s,r,i])=>[i?String(i[1]).toLowerCase():"click",o=>{const a=this.currentButtons[n].attributes;this.$emit(t.name||`btn-${n}`,o,a,this,(...l)=>this.resolve(o,a,this,...l)),o.defaultPrevented||(typeof r=="function"?r.call(this,o,a,this,(...l)=>this.resolve(o,a,this,...l)):this.resolve(o,a,this))}]))},initializeButtons(){if(this.currentButtons=[],this.buttons===!1)return!1;Array.isArray(this.buttons)?this.buttons.forEach((t,n)=>{this.currentButtons.push({attributes:this.buttonAttributes(t),listeners:this.buttonListeners(t,n)})}):this.type==="alert"?this.currentButtons.push({attributes:this.buttonAttributes(this.evaluatedConfirmButton),listeners:this.buttonListeners(this.evaluatedConfirmButton,0)}):this.type==="confirm"&&(this.currentButtons.push({attributes:this.buttonAttributes(this.evaluatedConfirmButton),listeners:this.buttonListeners(this.evaluatedConfirmButton,0)}),this.currentButtons.push({attributes:this.buttonAttributes(this.evaluatedCancelButton),listeners:this.buttonListeners(this.evaluatedCancelButton,1)}))},open(){return new Promise(t=>{const n=new Event("close",{cancelable:!0}),s=()=>{this.isDisplaying=!0,setTimeout(()=>{this.isShowing=!0,this.transition(()=>{this.$emit("opened"),t(this)})})};this.$emit("open",n,s),this.initializeButtons(),n.defaultPrevented||s()})},transition(t){const s=getComputedStyle(this.$refs.dialog).transitionDuration.split(",").map(r=>{const[i,o,a]=r.trim().match(/^([\d.]+)(\w+)$/);return C(parseFloat(o),a,"ms")}).sort((r,i)=>r-i).shift();return setTimeout(t,s)},toggle(){this.isShowing?this.close():this.open()}},computed:{customButtons(){return Object.entries(this.currentButtons||{}).filter(([t,n])=>!!t.match(/^btn-\d+$/)).map(([t,n])=>n)},triggerableClasses(){return{show:this.isShowing}},evaluatedCancelButton(){return this.evaluatedCancelButton||{variant:"secondary",label:"Cancel",name:"confirm",onClick:(t,n,s)=>{this.cancel(t,n,s,(...r)=>{this.resolve(t,n,s,...r)})}}},evaluatedConfirmButton(){return this.confirmButton||{variant:"primary",label:"Confirm",name:"confirm",onClick:(t,n,s)=>{this.confirm(t,n,s,(...r)=>{this.resolve(t,n,s,...r)})}}}},watch:{isShowing(t){t&&this.focus()},show(t){t&&this.open()}},mounted(){this.show&&this.open()},data(){return{currentButtons:[],isClosing:!1,isShowing:!1,isDisplaying:!1}}},N="",k={name:"Modal",components:{Btn:B},mixins:[P],props:{backdrop:{type:Boolean,default:!0},center:Boolean,closeable:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},title:String,type:{type:[Boolean,String],default:!1,validate(t){return["alert","confirm"].indexOf(t)!==-1}}},watch:{isShowing(t){document.querySelector("body").classList[t?"add":"remove"]("modal-open")}},beforeRouteLeave(){this.close()}},w={ref:"content",class:"modal-content"},S={class:"modal-header"},$={key:0,class:"modal-title"},z=["disabled"],_=[e.createElementVNode("span",{"aria-hidden":"true"},"\xD7",-1)],v={class:"modal-body"},x={key:0,ref:"footer",class:"modal-footer"},E={class:"modal-footer-buttons"};function M(t,n,s,r,i,o){const a=e.resolveComponent("btn");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["modal fade",{...t.triggerableClasses}]),style:e.normalizeStyle({display:t.isDisplaying?"block":"none"}),tabindex:"-1",onKeydown:n[2]||(n[2]=e.withKeys((...l)=>t.close&&t.close(...l),["esc"]))},[e.renderSlot(t.$slots,"backdrop",{},()=>[s.backdrop&&t.isDisplaying?(e.openBlock(),e.createElementBlock("div",{key:0,ref:"backdrop",class:e.normalizeClass(["modal-backdrop fade",{show:t.isShowing}]),onClick:n[0]||(n[0]=l=>s.closeable&&t.close)},null,2)):e.createCommentVNode("",!0)]),e.createElementVNode("div",{ref:"dialog",class:e.normalizeClass(["modal-dialog",{"modal-dialog-centered":s.center}])},[e.createElementVNode("div",w,[e.renderSlot(t.$slots,"header",{},()=>[e.createElementVNode("div",S,[e.renderSlot(t.$slots,"title",{},()=>[s.title?(e.openBlock(),e.createElementBlock("h3",$,e.toDisplayString(s.title),1)):e.createCommentVNode("",!0)]),e.renderSlot(t.$slots,"close-button",{},()=>[s.closeable?(e.openBlock(),e.createElementBlock("button",{key:0,ref:"close",type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",disabled:t.isClosing,onClick:n[1]||(n[1]=(...l)=>t.close&&t.close(...l))},_,8,z)):e.createCommentVNode("",!0)])])]),e.renderSlot(t.$slots,"body",{},()=>[e.createElementVNode("div",v,[e.renderSlot(t.$slots,"default")])]),s.footer?e.renderSlot(t.$slots,"footer",{key:0,close:t.close},()=>[t.currentButtons.length?(e.openBlock(),e.createElementBlock("div",x,[e.createElementVNode("div",E,[t.currentButtons.length?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(t.currentButtons,(l,u)=>(e.openBlock(),e.createBlock(a,e.mergeProps({key:`btn-${u}`},l.attributes,e.toHandlers(l.listeners)),null,16))),128)):e.createCommentVNode("",!0)])],512)):e.createCommentVNode("",!0)]):e.createCommentVNode("",!0)],512)],2)],38)}const f=p(k,[["render",M]]);class b{register(n,s){return this[n]=(r,i,o={})=>{const a=new Promise(function(l,u){e.createApp({render(){return s((d,...V)=>typeof d=="string"?d:typeof d=="function"?[].concat(d(e.h,this)):e.h(d,...V),{promise:()=>a,resolve:d=>(l(d),a),reject:d=>(u(d),a)},r,i,Object.assign({},o))}}).mount(document.body.appendChild(document.createElement("div")))});return a}}}const h=new b;h.register("alert",(t,{resolve:n},s,r,i)=>t(f,Object.assign({resolve(o,a,l,...u){return n(...u).then(()=>this.close())},show:!0,title:s,type:"alert"},i),()=>t(r,{ref:"content"}))),h.register("confirm",(t,{resolve:n},s,r,i)=>t(f,Object.assign({resolve(o,a,l,...u){return n(...u).then(()=>this.close())},show:!0,title:s,type:"confirm"},i),()=>t(r,{ref:"content"})));const O=t=>{t.config.globalProperties.$modal=h};c.Modal=f,c.ModalFactory=b,c.ModalPlugin=O,c.factory=h,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
